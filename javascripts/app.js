((function(){_.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{\=(.+?)\}\}/g}})).call(this),function(){window.delay=function(a,b){return setTimeout(b,a)},window.truncate=function(a){return a<0?Math.ceil(a):Math.floor(a)},window.pad=function(a,b){var c;return c=a.toString(),c.length<b&&(c=("0000000000"+c).slice(-b)),c},window.parseTimeString=function(a){var b,c,d;return b=new Date,c=a.match(/(\d+)(?::(\d\d))?\s*(p?)/),b.setHours(parseInt(c[1],10)+((d=c[3])!=null?d:{12:0})),b.setMinutes(parseInt(c[2],10)||0),b},window.formatMilliseconds=function(a,b,c,d){var e,f,g,h;return e=Math.abs(truncate(a/36e5)),a<0&&(e="-"+e),f=pad(Math.floor(Math.abs(a/6e4%60)),2),g=pad(Math.floor(Math.abs(a/1e3)%60),2),h="",b&&(h+=e),b&&c&&(h+=":"),c&&(h+=f),c&&d&&(h+=":"),d&&(h+=g),h},window.formatMinutes=function(a){var b,c;return c=a/60,c>=1?(b=c%1?1:0,c.toFixed(b)+"h"):a.toFixed(0)+"m"},window.simplifyTimeString=function(a){return a.replace(":00","")}}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a=jQuery,l={distance:{scroll:3,hold:3},time:{hold:300}},p={},p.start={},p.last={},p.gestures={},p.gesture_detected={},q={},i=function(){return a(this).off(".fingers"),a(this).on("touchstart.fingers",h),a(this).on("touchmove.fingers",g),a(this).on("touchend.fingers",f)},j=function(){return a(this).off(".fingers")},a.event.special.pullup={setup:i,teardown:j},a.event.special.pulldown={setup:i,teardown:j},a.event.special.pullright={setup:i,teardown:j},a.event.special.pullleft={setup:i,teardown:j},a(document).ready(function(){return a(document).bind("touchstart.fingers",e),a(document).bind("touchmove.fingers",d),a(document).bind("touchend.fingers",c)}),o=function(a){return p.start=k(a),p.last=Object.create(p.start),p.gesture_detected=null,p.gestures={},p.dx=0,p.dy=0,p.absolute_dx=0,p.absolute_dy=0},n=function(a){return p.last=k(a),p.absolute_dx=p.last.x-p.start.x,p.absolute_dy=p.last.y-p.start.y},m=function(a){},h=function(a){return delay(l.time.hold,function(){var a;if(!p.gesture_detected)return console.log("gesture detected by time"),a=l.distance.hold,p.gestures.hold=p.absolute_dx<=a&&p.absolute_dy<=a,p.gestures.hold&&console.log("holding"),p.gesture_detected=Object.create(p.last)}),!0},g=function(c){var d,e,f,g,h;f=l.distance.hold,!p.gesture_detected&&(p.absolute_dx>f||p.absolute_dy>f)&&(console.log("gesture detected by moving"),p.gesture_detected=Object.create(p.last));if(p.gesture_detected){p.dx=b(p.absolute_dx,"x"),p.dy=b(p.absolute_dy,"y"),p.gestures.hold===!0?(p.gestures.pullup=!1,p.gestures.pulldown=!1,p.gestures.pullright=!1,p.gestures.pullleft=!1):(p.dy===0?(p.gestures.pullup=!1,p.gestures.pulldown=!1):p.dy>0?(p.gestures.pulldown=!0,p.gestures.pullup=!1):p.dy<0&&(p.gestures.pullup=!0,p.gestures.pulldown=!1),p.dx===0?(p.gestures.pullright=!1,p.gestures.pullleft=!1):p.dx>0?(p.gestures.pullright=!0,p.gestures.pullleft=!1):p.dx<0&&(p.gestures.pullleft=!0,p.gestures.pullright=!1)),e=Object.keys(p.gestures);for(g=0,h=e.length;g<h;g++)d=e[g],p.gestures[d]&&a(c.target).trigger(d,p)}return!0},b=function(a,b){var c,d;return d=p.gesture_detected[b]-p.start[b],c=a,a>d?c-=d:a<-d?c+=d:c=0,c},f=function(a){return!0},e=function(a){return o(a),q.document_vertical_scrolling=!1,q.document_horizontal_scrolling=!1,!0},d=function(a){return n(a),Math.abs(p.absolute_dy)>l.distance.scroll&&(q.document_vertical_scrolling=!0),Math.abs(p.absolute_dx)>l.distance.scroll&&(q.document_horizontal_scrolling=!0),!0},c=function(a){return m(a),!0},k=function(a){return{x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY,time:new Date}},window.delay=function(a,b){return setTimeout(b,a)}}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l=Array.prototype.slice,m=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},n=Object.prototype.hasOwnProperty,o=function(a,b){function d(){this.constructor=a}for(var c in b)n.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},p=function(a,b){return function(){return a.apply(b,arguments)}};c={bind:function(a,b){var c,d,e,f,g;d=a.split(" "),c=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={});for(f=0,g=d.length;f<g;f++)e=d[f],c[e]||(c[e]=[]),c[e].push(b);return this},one:function(a,b){return this.bind(a,function(){return this.unbind(a,arguments.callee),b.apply(this,arguments)})},trigger:function(){var a,b,c,d,e,f,g,h;a=1<=arguments.length?l.call(arguments,0):[],c=a.shift(),e=a[a.length-1];if(typeof e=="object"&&e.silent)return;d=this.hasOwnProperty("_callbacks")&&((h=this._callbacks)!=null?h[c]:void 0);if(!d)return;for(f=0,g=d.length;f<g;f++){b=d[f];if(b.apply(this,a)===!1)break}return!0},unbind:function(a,b){var c,d,e,f,g;if(!a)return this._callbacks={},this;e=(g=this._callbacks)!=null?g[a]:void 0;if(!e)return this;if(!b)return delete this._callbacks[a],this;for(d=0,f=e.length;d<f;d++){c=e[d];if(c!==b)continue;e=e.slice(),e.splice(d,1),this._callbacks[a]=e;break}return this}},d={trace:!0,logPrefix:"(App)",log:function(){var a;a=1<=arguments.length?l.call(arguments,0):[];if(!this.trace)return;return this.logPrefix&&a.unshift(this.logPrefix),typeof console!="undefined"&&console!==null&&typeof console.log=="function"&&console.log.apply(console,a),this}},k=["included","extended"],f=function(){function a(){typeof this.init=="function"&&this.init.apply(this,arguments)}return a.include=function(a){var b,c,d;if(!a)throw"include(obj) requires obj";for(b in a)c=a[b],m.call(k,b)<0&&(this.prototype[b]=c);return(d=a.included)!=null&&d.apply(this),this},a.extend=function(a){var b,c,d;if(!a)throw"extend(obj) requires obj";for(b in a)c=a[b],m.call(k,b)<0&&(this[b]=c);return(d=a.extended)!=null&&d.apply(this),this},a.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a.prototype.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a}(),e=function(b){function d(a){d.__super__.constructor.apply(this,arguments),a&&this.load(a),this.cid||(this.cid="c-"+this.constructor.uid())}return o(d,b),d.extend(c),d.records={},d.crecords={},d.attributes=[],d.configure=function(){var a,b;return b=arguments[0],a=2<=arguments.length?l.call(arguments,1):[],this.className=b,this.records={},this.crecords={},a.length&&(this.attributes=a),this.attributes&&(this.attributes=j(this.attributes)),this.attributes||(this.attributes=[]),this.unbind(),this},d.toString=function(){return""+this.className+"("+this.attributes.join(", ")+")"},d.find=function(a){var b;b=this.records[a];if(!b&&(""+a).match(/c-\d+/))return this.findCID(a);if(!b)throw"Unknown record";return b.clone()},d.findCID=function(a){var b;b=this.crecords[a];if(!b)throw"Unknown record";return b.clone()},d.exists=function(a){try{return this.find(a)}catch(b){return!1}},d.refresh=function(a,b){var c,d,e,f;b==null&&(b={}),b.clear&&(this.records={},this.crecords={}),d=this.fromJSON(a),h(d)||(d=[d]);for(e=0,f=d.length;e<f;e++)c=d[e],c.id||(c.id=c.cid),this.records[c.id]=c,this.crecords[c.cid]=c;return this.trigger("refresh",!b.clear&&this.cloneArray(d)),this},d.select=function(a){var b,c,d;return d=function(){var d,e;d=this.records,e=[];for(b in d)c=d[b],a(c)&&e.push(c);return e}.call(this),this.cloneArray(d)},d.findByAttribute=function(a,b){var c,d,e;e=this.records;for(c in e){d=e[c];if(d[a]===b)return d.clone()}return null},d.findAllByAttribute=function(a,b){return this.select(function(c){return c[a]===b})},d.each=function(a){var b,c,d,e;d=this.records,e=[];for(b in d)c=d[b],e.push(a(c.clone()));return e},d.all=function(){return this.cloneArray(this.recordsValues())},d.first=function(){var a;return a=this.recordsValues()[0],a!=null?a.clone():void 0},d.last=function(){var a,b;return b=this.recordsValues(),a=b[b.length-1],a!=null?a.clone():void 0},d.count=function(){return this.recordsValues().length},d.deleteAll=function(){var a,b,c,d;c=this.records,d=[];for(a in c)b=c[a],d.push(delete this.records[a]);return d},d.destroyAll=function(){var a,b,c,d;c=this.records,d=[];for(a in c)b=c[a],d.push(this.records[a].destroy());return d},d.update=function(a,b,c){return this.find(a).updateAttributes(b,c)},d.create=function(a,b){var c;return c=new this(a),c.save(b)},d.destroy=function(a,b){return this.find(a).destroy(b)},d.change=function(a){return typeof a=="function"?this.bind("change",a):this.trigger("change",a)},d.fetch=function(a){return typeof a=="function"?this.bind("fetch",a):this.trigger("fetch",a)},d.toJSON=function(){return this.recordsValues()},d.fromJSON=function(a){var b,c,d,e;if(!a)return;typeof a=="string"&&(a=JSON.parse(a));if(h(a)){e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(new this(b));return e}return new this(a)},d.fromForm=function(){var a;return(a=new this).fromForm.apply(a,arguments)},d.recordsValues=function(){var a,b,c,d;b=[],d=this.records;for(a in d)c=d[a],b.push(c);return b},d.cloneArray=function(a){var b,c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(b.clone());return e},d.idCounter=0,d.uid=function(){return this.idCounter++},d.prototype.isNew=function(){return!this.exists()},d.prototype.isValid=function(){return!this.validate()},d.prototype.validate=function(){},d.prototype.load=function(a){var b,c;for(b in a)c=a[b],typeof this[b]=="function"?this[b](c):this[b]=c;return this},d.prototype.attributes=function(){var a,b,c,d,e;b={},e=this.constructor.attributes;for(c=0,d=e.length;c<d;c++)a=e[c],a in this&&(typeof this[a]=="function"?b[a]=this[a]():b[a]=this[a]);return this.id&&(b.id=this.id),b},d.prototype.eql=function(a){return!(!a||a.constructor!==this.constructor||a.id!==this.id&&a.cid!==this.cid)},d.prototype.save=function(a){var b,c;a==null&&(a={});if(a.validate!==!1){b=this.validate();if(b)return this.trigger("error",b),!1}return this.trigger("beforeSave",a),c=this.isNew()?this.create(a):this.update(a),this.trigger("save",a),c},d.prototype.updateAttribute=function(a,b){return this[a]=b,this.save()},d.prototype.updateAttributes=function(a,b){return this.load(a),this.save(b)},d.prototype.changeID=function(a){var b;return b=this.constructor.records,b[a]=b[this.id],delete b[this.id],this.id=a,this.save()},d.prototype.destroy=function(a){return a==null&&(a={}),this.trigger("beforeDestroy",a),delete this.constructor.records[this.id],delete this.constructor.crecords[this.cid],this.destroyed=!0,this.trigger("destroy",a),this.trigger("change","destroy",a),this.unbind(),this},d.prototype.dup=function(a){var b;return b=new this.constructor(this.attributes()),a===!1?b.cid=this.cid:delete b.id,b},d.prototype.clone=function(){return Object.create(this)},d.prototype.reload=function(){var a;return this.isNew()?this:(a=this.constructor.find(this.id),this.load(a.attributes()),a)},d.prototype.toJSON=function(){return this.attributes()},d.prototype.toString=function(){return"<"+this.constructor.className+" ("+JSON.stringify(this)+")>"},d.prototype.fromForm=function(b){var c,d,e,f,g;d={},g=a(b).serializeArray();for(e=0,f=g.length;e<f;e++)c=g[e],d[c.name]=c.value;return this.load(d)},d.prototype.exists=function(){return this.id&&this.id in this.constructor.records},d.prototype.update=function(a){var b,c;return this.trigger("beforeUpdate",a),c=this.constructor.records,c[this.id].load(this.attributes()),b=c[this.id].clone(),b.trigger("update",a),b.trigger("change","update",a),b},d.prototype.create=function(a){var b,c;return this.trigger("beforeCreate",a),this.id||(this.id=this.cid),c=this.dup(!1),this.constructor.records[this.id]=c,this.constructor.crecords[this.cid]=c,b=c.clone(),b.trigger("create",a),b.trigger("change","create",a),b},d.prototype.bind=function(a,b){var c,d,e=this;return this.constructor.bind(a,c=function(a){if(a&&e.eql(a))return b.apply(e,arguments)}),this.constructor.bind("unbind",d=function(b){if(b&&e.eql(b))return e.constructor.unbind(a,c),e.constructor.unbind("unbind",d)}),c},d.prototype.one=function(a,b){var c,d=this;return c=this.bind(a,function(){return d.constructor.unbind(a,c),b.apply(d)})},d.prototype.trigger=function(){var a,b;return a=1<=arguments.length?l.call(arguments,0):[],a.splice(1,0,this),(b=this.constructor).trigger.apply(b,a)},d.prototype.unbind=function(){return this.trigger("unbind")},d}(f),b=function(b){function e(b){this.release=p(this.release,this);var c,d,f;this.options=b,f=this.options;for(c in f)d=f[c],this[c]=d;this.el||(this.el=document.createElement(this.tag)),this.el=a(this.el),this.className&&this.el.addClass(this.className),this.attributes&&this.el.attr(this.attributes),this.release(function(){return this.el.remove()}),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),this.events&&this.delegateEvents(),this.elements&&this.refreshElements(),e.__super__.constructor.apply(this,arguments)}return o(e,b),e.include(c),e.include(d),e.prototype.eventSplitter=/^(\S+)\s*(.*)$/,e.prototype.tag="div",e.prototype.release=function(a){return typeof a=="function"?this.bind("release",a):this.trigger("release")},e.prototype.$=function(b){return a(b,this.el)},e.prototype.delegateEvents=function(){var a,b,c,d,e,f,g;f=this.events,g=[];for(b in f)d=f[b],typeof d!="function"&&(d=this.proxy(this[d])),c=b.match(this.eventSplitter),a=c[1],e=c[2],e===""?g.push(this.el.bind(a,d)):g.push(this.el.delegate(e,a,d));return g},e.prototype.refreshElements=function(){var a,b,c,d;c=this.elements,d=[];for(a in c)b=c[a],d.push(this[b]=this.$(a));return d},e.prototype.delay=function(a,b){return setTimeout(this.proxy(a),b||0)},e.prototype.html=function(a){return this.el.html(a.el||a),this.refreshElements(),this.el},e.prototype.append=function(){var a,b,c;return b=1<=arguments.length?l.call(arguments,0):[],b=function(){var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(a.el||a);return e}(),(c=this.el).append.apply(c,b),this.refreshElements(),this.el},e.prototype.appendTo=function(a){return this.el.appendTo(a.el||a),this.refreshElements(),this.el},e.prototype.prepend=function(){var a,b,c;return b=1<=arguments.length?l.call(arguments,0):[],b=function(){var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(a.el||a);return e}(),(c=this.el).prepend.apply(c,b),this.refreshElements(),this.el},e.prototype.replace=function(b){var c,d;return d=[this.el,a(b.el||b)],c=d[0],this.el=d[1],c.replaceWith(this.el),this.delegateEvents(),this.refreshElements(),this.el},e}(f),a=(typeof window!="undefined"&&window!==null?window.jQuery:void 0)||(typeof window!="undefined"&&window!==null?window.Zepto:void 0)||function(a){return a},typeof Object.create!="function"&&(Object.create=function(a){var b;return b=function(){},b.prototype=a,new b}),h=function(a){return Object.prototype.toString.call(a)==="[object Array]"},i=function(a){var b;if(!a)return!0;for(b in a)return!1;return!0},j=function(a){return Array.prototype.slice.call(a,0)},g=this.Spine={},typeof module!="undefined"&&module!==null&&(module.exports=g),g.version="1.0.5",g.isArray=h,g.isBlank=i,g.$=a,g.Events=c,g.Log=d,g.Module=f,g.Controller=b,g.Model=e,f.extend.call(g,c),f.create=f.sub=b.create=b.sub=e.sub=function(a,b){var c;return c=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return o(b,a),b}(this),a&&c.include(a),b&&c.extend(b),typeof c.unbind=="function"&&c.unbind(),c},e.setup=function(a,b){var c;return b==null&&(b=[]),c=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return o(b,a),b}(this),c.configure.apply(c,[a].concat(l.call(b))),c},f.init=b.init=e.init=function(a,b,c,d,e){return new this(a,b,c,d,e)},g.Class=f}.call(this),function(){var a,b,c,d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j=Object.prototype.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},l=Array.prototype.slice;if(typeof Spine=="undefined"||Spine===null)Spine=require("spine");a=Spine.$,g=Spine.Model,b={getURL:function(a){return a&&(typeof a.url=="function"?a.url():void 0)||a.url},enabled:!0,pending:!1,requests:[],disable:function(a){return this.enabled?(this.enabled=!1,a(),this.enabled=!0):a()},requestNext:function(){var a;return a=this.requests.shift(),a?this.request(a):this.pending=!1},request:function(a){var b=this;return a().complete(function(){return b.requestNext()})},queue:function(a){if(!this.enabled)return;return this.pending?this.requests.push(a):(this.pending=!0,this.request(a)),a}},c=function(){function c(){}return c.prototype.defaults={contentType:"application/json",dataType:"json",processData:!1,headers:{"X-Requested-With":"XMLHttpRequest"}},c.prototype.ajax=function(b,c){return a.ajax(a.extend({},this.defaults,c,b))},c.prototype.queue=function(a){return b.queue(a)},c}(),d=function(a){function c(a){this.model=a,this.errorResponse=i(this.errorResponse,this),this.recordsResponse=i(this.recordsResponse,this)}return k(c,a),c.prototype.find=function(a,c){var d;return d=new this.model({id:a}),this.ajax(c,{type:"GET",url:b.getURL(d)}).success(this.recordsResponse).error(this.errorResponse)},c.prototype.all=function(a){return this.ajax(a,{type:"GET",url:b.getURL(this.model)}).success(this.recordsResponse).error(this.errorResponse)},c.prototype.fetch=function(a,b){var c,d=this;return a==null&&(a={}),b==null&&(b={}),(c=a.id)?(delete a.id,this.find(c,a).success(function(a){return d.model.refresh(a,b)})):this.all(a).success(function(a){return d.model.refresh(a,b)})},c.prototype.recordsResponse=function(a,b,c){return this.model.trigger("ajaxSuccess",null,b,c)},c.prototype.errorResponse=function(a,b,c){return this.model.trigger("ajaxError",null,a,b,c)},c}(c),h=function(a){function c(a){this.record=a,this.errorResponse=i(this.errorResponse,this),this.recordResponse=i(this.recordResponse,this),this.model=this.record.constructor}return k(c,a),c.prototype.reload=function(a,c){var d=this;return this.queue(function(){return d.ajax(a,{type:"GET",url:b.getURL(d.record)}).success(d.recordResponse(c)).error(d.errorResponse(c))})},c.prototype.create=function(a,c){var d=this;return this.queue(function(){return d.ajax(a,{type:"POST",data:JSON.stringify(d.record),url:b.getURL(d.model)}).success(d.recordResponse(c)).error(d.errorResponse(c))})},c.prototype.update=function(a,c){var d=this;return this.queue(function(){return d.ajax(a,{type:"PUT",data:JSON.stringify(d.record),url:b.getURL(d.record)}).success(d.recordResponse(c)).error(d.errorResponse(c))})},c.prototype.destroy=function(a,c){var d=this;return this.queue(function(){return d.ajax(a,{type:"DELETE",url:b.getURL(d.record)}).success(d.recordResponse(c)).error(d.errorResponse(c))})},c.prototype.recordResponse=function(a){var c=this;return a==null&&(a={}),function(d,e,f){var g;return Spine.isBlank(d)?d=!1:d=c.model.fromJSON(d),b.disable(function(){if(d)return d.id&&c.record.id!==d.id&&c.record.changeID(d.id),c.record.updateAttributes(d.attributes())}),c.record.trigger("ajaxSuccess",d,e,f),(g=a.success)!=null?g.apply(c.record):void 0}},c.prototype.errorResponse=function(a){var b=this;return a==null&&(a={}),function(c,d,e){var f;return b.record.trigger("ajaxError",c,d,e),(f=a.error)!=null?f.apply(b.record):void 0}},c}(c),g.host="",f={ajax:function(){return new h(this)},url:function(){var a,c;return a=1<=arguments.length?l.call(arguments,0):[],c=b.getURL(this.constructor),c.charAt(c.length-1)!=="/"&&(c+="/"),c+=encodeURIComponent(this.id),a.unshift(c),a.join("/")}},e={ajax:function(){return new d(this)},url:function(){var a;return a=1<=arguments.length?l.call(arguments,0):[],a.unshift(this.className.toLowerCase()+"s"),a.unshift(g.host),a.join("/")}},g.Ajax={extended:function(){return this.fetch(this.ajaxFetch),this.change(this.ajaxChange),this.extend(e),this.include(f)},ajaxFetch:function(){var a;return(a=this.ajax()).fetch.apply(a,arguments)},ajaxChange:function(a,b,c){c==null&&(c={});if(c.ajax===!1)return;return a.ajax()[b](c.ajax,c)}},g.Ajax.Methods={extended:function(){return this.extend(e),this.include(f)}},b.defaults=c.prototype.defaults,Spine.Ajax=b,typeof module!="undefined"&&module!==null&&(module.exports=b)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};if(typeof Spine=="undefined"||Spine===null)Spine=require("spine");a=Spine.$,Spine.List=function(c){function e(){this.change=b(this.change,this),e.__super__.constructor.apply(this,arguments),this.bind("change",this.change)}return d(e,c),e.prototype.events={"click .item":"click"},e.prototype.selectFirst=!1,e.prototype.template=function(){return arguments[0]},e.prototype.change=function(a){this.current=a;if(!this.current){this.children().removeClass("active");return}return this.children().removeClass("active"),this.children().forItem(this.current).addClass("active")},e.prototype.render=function(a){a&&(this.items=a),this.html(this.template(this.items)),this.change(this.current);if(this.selectFirst&&!this.children(".active").length)return this.children(":first").click()},e.prototype.children=function(a){return this.el.children(a)},e.prototype.click=function(b){var c;return c=a(b.currentTarget).item(),this.trigger("change",c),!0},e}(Spine.Controller),typeof module!="undefined"&&module!==null&&(module.exports=Spine.List)}.call(this),function(){if(typeof Spine=="undefined"||Spine===null)Spine=require("spine");Spine.Model.Local={extended:function(){return this.change(this.saveLocal),this.fetch(this.loadLocal)},saveLocal:function(){var a;return a=JSON.stringify(this),localStorage[this.className]=a},loadLocal:function(){var a;return a=localStorage[this.className],this.refresh(a||[],{clear:!0})}},typeof module!="undefined"&&module!==null&&(module.exports=Spine.Model.Local)}.call(this),function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=Array.prototype.slice;if(typeof Spine=="undefined"||Spine===null)Spine=require("spine");a=Spine.$,Spine.Manager=function(a){function b(){this.controllers=[],this.bind("change",this.change),this.add.apply(this,arguments)}return c(b,a),b.include(Spine.Events),b.prototype.add=function(){var a,b,c,e,f;b=1<=arguments.length?d.call(arguments,0):[],f=[];for(c=0,e=b.length;c<e;c++)a=b[c],f.push(this.addOne(a));return f},b.prototype.addOne=function(a){var b=this;return a.bind("active",function(){var c;return c=1<=arguments.length?d.call(arguments,0):[],b.trigger.apply(b,["change",a].concat(d.call(c)))}),a.bind("release",function(){return b.controllers.splice(b.controllers.indexOf(a),1)}),this.controllers.push(a)},b.prototype.deactivate=function(){return this.trigger.apply(this,["change",!1].concat(d.call(arguments)))},b.prototype.change=function(){var a,b,c,e,f,g,h;c=arguments[0],a=2<=arguments.length?d.call(arguments,1):[],g=this.controllers,h=[];for(e=0,f=g.length;e<f;e++)b=g[e],b===c?h.push(b.activate.apply(b,a)):h.push(b.deactivate.apply(b,a));return h},b}(Spine.Module),Spine.Controller.include({active:function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],typeof a[0]=="function"?this.bind("active",a[0]):(a.unshift("active"),this.trigger.apply(this,a)),this},isActive:function(){return this.el.hasClass("active")},activate:function(){return this.el.addClass("active"),this},deactivate:function(){return this.el.removeClass("active"),this}}),Spine.Stack=function(a){function b(){var a,c,e,f,g,h=this;b.__super__.constructor.apply(this,arguments),this.manager=new Spine.Manager,this.manager.bind("change",function(){var a,b;b=arguments[0],a=2<=arguments.length?d.call(arguments,1):[];if(b)return h.active.apply(h,a)}),f=this.controllers;for(a in f)c=f[a],this[a]=new c({stack:this}),this.add(this[a]);g=this.routes,e=function(a,b){var c;return typeof b=="function"&&(c=b),c||(c=function(){var a;return(a=h[b]).active.apply(a,arguments)}),h.route(a,c)};for(a in g)c=g[a],e(a,c);this["default"]&&this[this["default"]].active()}return c(b,a),b.prototype.controllers={},b.prototype.routes={},b.prototype.className="spine stack",b.prototype.add=function(a){return this.manager.add(a),this.append(a)},b}(Spine.Controller),typeof module!="undefined"&&module!==null&&(module.exports=Spine.Manager)}.call(this),function(){var Collection,Instance,Singleton,isArray,singularize,underscore,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};if(typeof Spine=="undefined"||Spine===null)Spine=require("spine");isArray=Spine.isArray;if(typeof require=="undefined"||require===null)require=function(value){return eval(value)};Collection=function(a){function b(a){var b,c;a==null&&(a={});for(b in a)c=a[b],this[b]=c}return __extends(b,a),b.prototype.all=function(){var a=this;return this.model.select(function(b){return a.associated(b)})},b.prototype.first=function(){return this.all()[0]},b.prototype.last=function(){var a;return a=this.all(),a[a.length-1]},b.prototype.find=function(a){var b,c=this;b=this.select(function(b){return b.id+""==a+""});if(!b[0])throw"Unknown record";return b[0]},b.prototype.findAllByAttribute=function(a,b){var c=this;return this.model.select(function(c){return c[a]===b})},b.prototype.findByAttribute=function(a,b){return this.findAllByAttribute(a,b)[0]},b.prototype.select=function(a){var b=this;return this.model.select(function(c){return b.associated(c)&&a(c)})},b.prototype.refresh=function(a){var b,c,d,e,f,g,h;h=this.all();for(d=0,f=h.length;d<f;d++)b=h[d],delete this.model.records[b.id];c=this.model.fromJSON(a),isArray(c)||(c=[c]);for(e=0,g=c.length;e<g;e++)b=c[e],b.newRecord=!1,b[this.fkey]=this.record.id,this.model.records[b.id]=b;return this.model.trigger("refresh",c)},b.prototype.create=function(a){return a[this.fkey]=this.record.id,this.model.create(a)},b.prototype.associated=function(a){return a[this.fkey]===this.record.id},b}(Spine.Module),Instance=function(a){function b(a){var b,c;a==null&&(a={});for(b in a)c=a[b],this[b]=c}return __extends(b,a),b.prototype.exists=function(){return this.record[this.fkey]&&this.model.exists(this.record[this.fkey])},b.prototype.update=function(a){return a instanceof this.model||(a=new this.model(a)),a.isNew()&&a.save(),this.record[this.fkey]=a&&a.id},b}(Spine.Module),Singleton=function(a){function b(a){var b,c;a==null&&(a={});for(b in a)c=a[b],this[b]=c}return __extends(b,a),b.prototype.find=function(){return this.record.id&&this.model.findByAttribute(this.fkey,this.record.id)},b.prototype.update=function(a){return a instanceof this.model||(a=this.model.fromJSON(a)),a[this.fkey]=this.record.id,a.save()},b}(Spine.Module),singularize=function(a){return a.replace(/s$/,"")},underscore=function(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()},Spine.Model.extend({hasMany:function(a,b,c){var d;return c==null&&(c=""+underscore(this.className)+"_id"),d=function(d){return typeof b=="string"&&(b=require(b)),new Collection({name:a,model:b,record:d,fkey:c})},this.prototype[a]=function(a){return a!=null&&d(this).refresh(a),d(this)}},belongsTo:function(a,b,c){var d;return c==null&&(c=""+singularize(a)+"_id"),d=function(d){return typeof b=="string"&&(b=require(b)),new Instance({name:a,model:b,record:d,fkey:c})},this.prototype[a]=function(a){return a!=null&&d(this).update(a),d(this).exists()},this.attributes.push(c)},hasOne:function(a,b,c){var d;return c==null&&(c=""+underscore(this.className)+"_id"),d=function(d){return typeof b=="string"&&(b=require(b)),new Singleton({name:a,model:b,record:d,fkey:c})},this.prototype[a]=function(a){return a!=null&&d(this).update(a),d(this).find()}}})}.call(this),function(){var a,b,c,d,e,f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},h=Array.prototype.slice;if(typeof Spine=="undefined"||Spine===null)Spine=require("spine");a=Spine.$,c=/^#*/,d=/:([\w\d]+)/g,e=/\*([\w\d]+)/g,b=/[-[\]{}()+?.,\\^$|#\s]/g,Spine.Route=function(f){function j(a,c){var f;this.path=a,this.callback=c,this.names=[];if(typeof a=="string"){d.lastIndex=0;while((f=d.exec(a))!==null)this.names.push(f[1]);a=a.replace(b,"\\$&").replace(d,"([^/]*)").replace(e,"(.*?)"),this.route=new RegExp("^"+a+"$")}else this.route=a}var i;return g(j,f),j.extend(Spine.Events),j.historySupport=((i=window.history)!=null?i.pushState:void 0)!=null,j.routes=[],j.options={trigger:!0,history:!1,shim:!1},j.add=function(a,b){var c,d,e;if(typeof a!="object"||a instanceof RegExp)return this.routes.push(new this(a,b));e=[];for(c in a)d=a[c],e.push(this.add(c,d));return e},j.setup=function(b){b==null&&(b={}),this.options=a.extend({},this.options,b),this.options.history&&(this.history=this.historySupport&&this.options.history);if(this.options.shim)return;return this.history?a(window).bind("popstate",this.change):a(window).bind("hashchange",this.change),this.change()},j.unbind=function(){return this.history?a(window).unbind("popstate",this.change):a(window).unbind("hashchange",this.change)},j.navigate=function(){var b,c,d,e;b=1<=arguments.length?h.call(arguments,0):[],d={},c=b[b.length-1],typeof c=="object"?d=b.pop():typeof c=="boolean"&&(d.trigger=b.pop()),d=a.extend({},this.options,d),e=b.join("/");if(this.path===e)return;this.path=e,this.trigger("navigate",this.path),d.trigger&&this.matchRoute(this.path,d);if(d.shim)return;return this.history?history.pushState({},document.title,this.path):window.location.hash=this.path},j.getPath=function(){var a;return a=window.location.pathname,a.substr(0,1)!=="/"&&(a="/"+a),a},j.getHash=function(){return window.location.hash},j.getFragment=function(){return this.getHash().replace(c,"")},j.getHost=function(){return(document.location+"").replace(this.getPath()+this.getHash(),"")},j.change=function(){var a;a=this.getFragment()!==""?this.getFragment():this.getPath();if(a===this.path)return;return this.path=a,this.matchRoute(this.path)},j.matchRoute=function(a,b){var c,d,e,f;f=this.routes;for(d=0,e=f.length;d<e;d++){c=f[d];if(c.match(a,b))return this.trigger("change",c,a),c}},j.prototype.match=function(a,b){var c,d,e,f,g;b==null&&(b={}),d=this.route.exec(a);if(!d)return!1;b.match=d,f=d.slice(1);if(this.names.length)for(c=0,g=f.length;c<g;c++)e=f[c],b[this.names[c]]=e;return this.callback.call(null,b)!==!1},j}(Spine.Module),Spine.Route.change=Spine.Route.proxy(Spine.Route.change),Spine.Controller.include({route:function(a,b){return Spine.Route.add(a,this.proxy(b))},routes:function(a){var b,c,d;d=[];for(b in a)c=a[b],d.push(this.route(b,c));return d},navigate:function(){return Spine.Route.navigate.apply(Spine.Route,arguments)}}),typeof module!="undefined"&&module!==null&&(module.exports=Spine.Route)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};if(typeof Spine=="undefined"||Spine===null)Spine=require("spine");a=Spine.$,Spine.Tabs=function(c){function e(){this.change=b(this.change,this),e.__super__.constructor.apply(this,arguments),this.bind("change",this.change)}return d(e,c),e.prototype.events={"click [data-name]":"click"},e.prototype.change=function(a){if(!a)return;return this.current=a,this.children().removeClass("active"),this.children("[data-name="+this.current+"]").addClass("active")},e.prototype.render=function(){this.change(this.current);if(!this.children(".active").length&&!this.current)return this.children(":first").click()},e.prototype.children=function(a){return this.el.children(a)},e.prototype.click=function(b){var c;return c=a(b.currentTarget).attr("data-name"),this.trigger("change",c)},e.prototype.connect=function(a,b){var c=this;return this.bind("change",function(c){if(c===a)return b.active()}),b.bind("active",function(){return c.change(a)})},e}(Spine.Controller),typeof module!="undefined"&&module!==null&&(module.exports=Spine.Tabs)}.call(this),function(){$.fn.item=function(){var a;return a=$(this),a=a.data("item")||(typeof a.tmplItem=="function"?a.tmplItem().data:void 0),a!=null&&typeof a.reload=="function"&&a.reload(),a},$.fn.forItem=function(a){return this.filter(function(){var b;return b=$(this).item(),(typeof a.eql=="function"?a.eql(b):void 0)||a===b})}}.call(this),function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=
a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};a=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.configure("Agenda","day_start","day_end","last_checkpoint","reserve_ms_at_last_checkpoint","reserve_ms_last_checkpoint_change"),b.extend(Spine.Model.Local),b.prototype.validate=function(){this.day_start||"Day start time is required";if(!this.day_end)return"Day end time is required"},b}(Spine.Model),window.Agenda=a}.call(this),function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};a=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.configure("Task","name","duration","done","order_index"),b.extend(Spine.Model.Local),b.unfinished=function(){return this.select(function(a){return!a.done})},b.finished=function(){return this.select(function(a){return a.done})},b}(Spine.Model),window.Task=a}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};a=function(a){function c(){this.render=b(this.render,this),c.__super__.constructor.apply(this,arguments),this.item.bind("update",this.render),Task.bind("create refresh update destroy",this.render),this.render()}return d(c,a),c.prototype.render=function(){return setTimeout(this.render,500)},c}(Spine.Controller),window.AgendaItem=a}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};a=function(a){function c(){this.animateDuration=b(this.animateDuration,this),this.updateDurationColor=b(this.updateDurationColor,this),this.durationTapped=b(this.durationTapped,this),this.taskHeld=b(this.taskHeld,this),this.taskReleased=b(this.taskReleased,this),this.taskSwiping=b(this.taskSwiping,this),this.taskTapped=b(this.taskTapped,this),this.normalizeSwipeDx=b(this.normalizeSwipeDx,this),this.remove=b(this.remove,this),this.updateName=b(this.updateName,this),this.startEditingName=b(this.startEditingName,this),this.editName=b(this.editName,this),this.transformCheckmarkOpacity=b(this.transformCheckmarkOpacity,this),this.transformContentMoveHoriz=b(this.transformContentMoveHoriz,this),this.transformMoveVert=b(this.transformMoveVert,this),this.transformFlipVert=b(this.transformFlipVert,this),this.transform=b(this.transform,this),this.created=b(this.created,this),this.creating=b(this.creating,this),this.render=b(this.render,this),this.template=b(this.template,this),c.__super__.constructor.apply(this,arguments);if(!this.item)throw"@item required";this.item.bind("update",this.render),this.item.bind("destroy",this.remove)}return d(c,a),c.config={height:40,gutter_width:40,touch_tap_time_tolerance:500,touch_tap_dist_tolerance:5,touch_hold_dist_tolerance:5,touch_swipe_dist_tolerance:15},c.prototype.className="task",c.prototype.elements={".content":"content","input[type='text']":"name_input",".duration":"duration",".check":"checkmark"},c.prototype.events={"focusout input[type='text']":"updateName"},c.prototype.template=function(a){return _.template($("#task-template").html(),{task:a})},c.prototype.render=function(a){var b=this;return a&&(this.item=a),this.item.controller=this,this.html(this.template(this.item)),this.updateDurationColor(),this.el.bind("pullright",function(a,c){return a.preventDefault(),b.taskSwiping(c.dx)}),this.el.bind("touchend",function(a,c){return b.taskReleased()}),this},c.prototype.creating=function(){return this.el.css({height:"0","z-index":"10"})},c.prototype.created=function(){return this.el.css({height:c.config.height+"px","z-index":"100"})},c.prototype.transform=function(a,b,c,d,e,f){var g,h=this;return g={},g[b]=c+d,e?a.css(b)===c+d?f&&f():a.transition(_.extend(g,{complete:function(){return f&&f()}})):a.css(g)},c.prototype.transformFlipVert=function(a,b,c){return this.el.css({transformOrigin:"50% 0"}),this.transform(this.el,"rotateX",a,"deg",b,c)},c.prototype.transformMoveVert=function(a,b,c){return this.transform(this.el,"y",a,"",b,c)},c.prototype.transformContentMoveHoriz=function(a,b,c){return this.transform(this.content,"x",a,"",b,c)},c.prototype.transformCheckmarkOpacity=function(a,b,c){return this.transform(this.checkmark,"opacity",a,"",b,c)},c.prototype.editName=function(){return this.el.find("input").focus()},c.prototype.startEditingName=function(){return this.el.find("input").val(""),this.editName()},c.prototype.updateName=function(){var a;return a=this.name_input.val(),a.length?(this.item.name=a,this.item.save()):Tasks.trigger("task:delete",this.item)},c.prototype.remove=function(){return this.el.remove()},c.prototype.normalizeSwipeDx=function(a){var b;return b=c.config.touch_swipe_dist_tolerance,a>b?a-=b:a<-b?a+=b:a=0,a},c.prototype.taskTapped=function(){return app.log("task tapped"),this.editName()},c.prototype.taskSwiping=function(a){var b,d,e;app.log("task swiping: "+a),d=c.config.gutter_width,a=a>0?a:0,a>d&&(b=a-d,a=d+b/(b/50+1)),this.transformContentMoveHoriz(a);if(a>0)return this.toggle_done=typeof this.toggle_done=="undefined"?!1:this.toggle_done,this.item.done?this.transformCheckmarkOpacity(1-a/d):this.transformCheckmarkOpacity(a/d),e=a>=d?!0:!1,e===!this.toggle_done&&(this.item.done?e?this.content.removeClass("done"):this.content.addClass("done"):e?this.content.addClass("green"):this.content.removeClass("green")),this.toggle_done=e},c.prototype.taskReleased=function(){var a,b,c=this;return this.toggle_done?(this.item.done=!this.item.done,b=this.item.done?Task.finished():Task.unfinished(),a=b[b.length-1],this.item.order_index=a?a.order_index+1:0,this.item.done&&this.content.removeClass("green").addClass("done"),this.transformContentMoveHoriz(0,!0,function(){return c.item.save(),Tasks.trigger("task:toggle_done",c.item)})):this.transformContentMoveHoriz(0,!0)},c.prototype.taskHeld=function(){return app.log("task held")},c.prototype.durationTapped=function(){var a,b=this;return app.log("duration tapped"),a=60,this.item.duration>30?a=30:this.item.duration>15&&(a=15),this.animateDuration(this.item.duration,a,500,function(){return b.item.duration=a,b.item.save()})},c.prototype.updateDurationColor=function(a){var b;return a=a?a:this.item.duration,b=a/60,this.duration.css("background-color","rgba(203,222,228, "+b+")")},c.prototype.animateDuration=function(a,b,c,d){var e,f,g,h,i=this;return f=b-a,e=new Date,g=e,h=function(){var b,j;return j=g-e,b=a+f*j/c,i.duration.html(formatMinutes(b)),i.updateDurationColor(b),j>c?d():(g=new Date,delay(10,function(){return h()}))},h()},c}(Spine.Controller),window.TaskItem=a}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};a=function(a){function c(){this.moveTaskToCorrectList=b(this.moveTaskToCorrectList,this),this["delete"]=b(this["delete"],this),this.newTaskBarReleased=b(this.newTaskBarReleased,this),this.newTaskBarSwiping=b(this.newTaskBarSwiping,this),this.startCreatingNewTask=b(this.startCreatingNewTask,this),this.addAll=b(this.addAll,this),this.addTaskItemToList=b(this.addTaskItemToList,this),this.addOne=b(this.addOne,this),this.updateVisibilityOfClearTasksBar=b(this.updateVisibilityOfClearTasksBar,this),this.render=b(this.render,this),c.__super__.constructor.apply(this,arguments),Task.bind("refresh",this.render),Task.bind("create",this.addOne),c.bind("task:delete",this["delete"]),c.bind("task:toggle_done",this.moveTaskToCorrectList)}return d(c,a),c.extend(Spine.Events),c.prototype.elements={"#todo":"todo","#done":"done","#new-task":"new_task_bar","#clear-tasks":"clear_tasks_bar"},c.prototype.render=function(){var a=this;return this.todo.html(""),this.done.html(""),this.updateVisibilityOfClearTasksBar(),this.addAll(),this.new_task_bar.bind("pulldown",function(b,c){return b.preventDefault(),a.newTaskBarSwiping(c.dy)}),this.new_task_bar.bind("touchend",function(b,c){return a.newTaskBarReleased()}),this},c.prototype.updateVisibilityOfClearTasksBar=function(a){return Task.finished().length===0?a?this.clear_tasks_bar.slideUp():this.clear_tasks_bar.hide():a?this.clear_tasks_bar.slideDown():this.clear_tasks_bar.show()},c.prototype.addOne=function(a){var b,c;return c=new TaskItem({item:a}),b=a.done?this.done:this.todo,this.addTaskItemToList(c,b)},c.prototype.addTaskItemToList=function(a,b){var c;return c=a.render().el,b.append(c)},c.prototype.addAll=function(){var a,b,c,d,e;b=_.sortBy(Task.all(),function(a){return a.order_index}),e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(this.addOne(a));return e},c.prototype.startCreatingNewTask=function(){var a;return this.started_creating=!0,this.task=null,this.task_item=null,this.create=!1,this.task=Task.init({duration:60,name:"Pull to create task",order_index:Task.unfinished().length}),this.task_item=new TaskItem({item:this.task}),this.task_item.creating(),this.task_item.transformFlipVert(-90),this.addTaskItemToList(this.task_item,this.todo),a=this.new_task_bar.nextAll(),a.transition({y:TaskItem.config.height+"px"})},c.prototype.newTaskBarSwiping=function(a){var b,c,d;app.log("new task swiping: "+a),this.started_creating||this.startCreatingNewTask(),b=Math.asin(a/TaskItem.config.height)*360/(2*Math.PI),c=a>0?-90+b:-90,c=c<0?c:0,this.task_item.transformFlipVert(c),d=a<TaskItem.config.height?a:TaskItem.config.height,d=d>0?d:0,this.new_task_bar.css({y:d});if(c===0){if(!this.create)return this.task.name="Release to create task",this.task_item.render(),this.create=!0}else if(this.create)return this.task.name="Pull to create task",this.task_item.render(),this.create=!1},c.prototype.newTaskBarReleased=function(){var a,b=this;app.log("new task released");if(this.started_creating)return a=this.new_task_bar.nextAll(),this.create?(this.task.save({silent:!0}),this.task_item.created(),a.css({y:0}),this.new_task_bar.css({y:0}),this.task_item.startEditingName()):(a.transition({y:0}),this.new_task_bar.transition({y:0}),this.task_item.transformFlipVert(-90,!0,function(){return b.task_item.remove()})),this.started_creating=!1},c.prototype["delete"]=function(a){var b,c,d=this;return app.log("deleting task"),c=a.controller.el,b=c.nextAll().add(c.parent().nextAll()),b.transition({y:-TaskItem.config.height}),a.controller.transformFlipVert(-90,!0,function(){return a.destroy(),b.css({y:0})})},c.prototype.moveTaskToCorrectList=function(a){var b,c,d,e,f,g,h=this;return app.log("moving task to correct list"),g=a.controller.el,b=a.done?this.todo:this.done,d=a.done?this.done:this.todo,this.updateVisibilityOfClearTasksBar(!0),c=d.offset().top+d.height()-g.offset().top,c>0?f=g.nextAll().add(g.parent().nextUntil(d.next())):f=g.prevAll().add(g.parent().prevUntil(d)),c>0?e=-TaskItem.config.height:e=TaskItem.config.height,f.transition({y:e}),c>0&&(c-=TaskItem.config.height),a.controller.transformMoveVert(c,!0,function(){return f.css({y:0}),h.render()})},c}(Spine.Controller),window.Tasks=a}.call(this),function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};a=function(a){function b(){var a=this;b.__super__.constructor.apply(this,arguments),Agenda.bind("refresh",function(){var a;return Agenda.first()||Agenda.create({day_start:420,day_end:1380}),a=new AgendaItem({el:$("#wrapper"),item:Agenda.first()})}),Agenda.fetch(),this.tasks=new Tasks({el:$("#tasks")}),Task.fetch()}return c(b,a),b.config={debugging:!0},b.prototype.log=function(a){if(b.config.debugging)return console.log(a)},b}(Spine.Controller),window.App=a}.call(this)